<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="RateRestrictionSQL">
	<typeAlias alias="rateRestriction" type="com.ccm.api.model.rateRestriction.RateRestriction" />
	
	<insert id="addRateRestriction" parameterClass="rateRestriction">
		INSERT INTO RateRestriction(
			rateRestrictionId,
			hotelCode,
			rateCode,
			restrictionType,
			beginDate,
			endDate,
			Sun,
			Mon,
			Tue,
			Wed,
			Thu,
			Fri,
			Sat)
		VALUES(
			#rateRestrictionId#,
			REPLACE(REPLACE(#hotelCode#,' ',''),'　',''),
			REPLACE(REPLACE(#rateCode#,' ',''),'　',''),
			#restrictionType#,
			#beginDate#,
			#endDate#,
			#Sun#,
			#Mon#,
			#Tue#,
			#Wed#,
			#Thu#,
			#Fri#,
			#Sat#)
	</insert>
	
	<update id="updateRateRestriction" parameterClass="rateRestriction">
		UPDATE RateRestriction SET
			restrictionType=#restrictionType#,
			Sun=#Sun#,
			Mon=#Mon#,
			Tue=#Tue#,
			Wed=#Wed#,
			Thu=#Thu#,
			Fri=#Fri#,
			Sat=#Sat#
		WHERE hotelCode=REPLACE(REPLACE(#hotelCode#,' ',''),'　','')
		AND rateCode=REPLACE(REPLACE(#rateCode#,' ',''),'　','')
		AND beginDate=#beginDate#
		AND endDate=#endDate#
	</update>
	
	<select id="getRateRestrictionByDate" resultClass="rateRestriction">
		SELECT * FROM RateRestriction 
		WHERE hotelCode=#hotelCode#
		AND rateCode=#rateCode#
		AND beginDate=#beginDate#
		AND endDate=#endDate#
    </select>
</sqlMap>